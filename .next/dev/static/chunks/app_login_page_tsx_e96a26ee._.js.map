{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Acer/Desktop/8-preact-end-main/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Cookies from \"js-cookie\";\nimport { ModeToggle } from \"@/components/mode\";\n\nexport default function Login() {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const res = await fetch(\"/api/auth/sign-in\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.message || \"Email yoki parol xato!\");\n      }\n\n      const user = data.data;\n\n      if (user) {\n        localStorage.setItem(\"user\", JSON.stringify(user));\n\n        if (user.role) {\n          Cookies.set(\"role\", user.role, { expires: 7 });\n        }\n      }\n\n      router.push(\"/\");\n      router.refresh();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full h-[90vh] flex items-center justify-center p-0! relative transition-colors duration-300\">\n      <div className=\"absolute top-5 left-5\">\n        <ModeToggle />\n      </div>\n\n      <div className=\"w-full max-w-md bg-card border border-border rounded-2xl p-8 shadow-2xl transition-all\">\n        <h1 className=\"text-3xl font-bold text-foreground text-center mb-2\">\n          Xush kelibsiz ðŸ‘‹\n        </h1>\n        <p className=\"text-muted-foreground text-center mb-6 text-sm\">\n          Tizimga kirish uchun ma'lumotlarni kiriting\n        </p>\n\n        <form onSubmit={handleLogin} className=\"space-y-4\">\n          <div>\n            <label className=\"text-xs text-muted-foreground uppercase tracking-wider font-medium\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              className=\"w-full mt-1 px-4 py-2.5 rounded-lg bg-secondary border border-input text-foreground focus:ring-2 focus:ring-ring outline-none transition-all placeholder:text-muted-foreground/50\"\n              placeholder=\"admin@mail.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"text-xs text-muted-foreground uppercase tracking-wider font-medium\">\n              Parol\n            </label>\n            <input\n              type=\"password\"\n              className=\"w-full mt-1 px-4 py-2.5 rounded-lg bg-secondary border border-input text-foreground focus:ring-2 focus:ring-ring outline-none transition-all placeholder:text-muted-foreground/50\"\n              placeholder=\"********\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n\n          {error && (\n            <div className=\"bg-destructive/10 border border-destructive/50 text-destructive text-xs p-3 rounded-lg animate-in fade-in duration-300\">\n              {error}\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-3 rounded-lg bg-primary text-primary-foreground font-bold hover:opacity-90 active:scale-[0.98] transition-all disabled:opacity-50 flex justify-center items-center shadow-md\"\n          >\n            {loading ? (\n              <div className=\"h-5 w-5 border-2 border-current border-t-transparent rounded-full animate-spin\"></div>\n            ) : (\n              \"Tizimga kirish\"\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":["useState","useRouter","Cookies","ModeToggle","Login","router","email","setEmail","password","setPassword","loading","setLoading","error","setError","handleLogin","e","React","FormEvent","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","message","user","localStorage","setItem","role","set","expires","push","refresh","err","target","value"],"mappings":"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","ignoreList":[]}}]
}