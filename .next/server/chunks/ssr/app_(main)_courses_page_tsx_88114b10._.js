module.exports=[17274,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(5434),f=a.i(33217),g=a.i(70025),h=a.i(37927),i=a.i(15618),j=a.i(99464),k=a.i(81560),l=a.i(70106);let m=(0,l.default)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),n=(0,l.default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);var o=a.i(60246),p=a.i(41710),q=a.i(87532),r=a.i(96221),s=a.i(33508),t=a.i(67453),u=a.i(5784),v=a.i(17545),w=a.i(28164),x=a.i(62036),y=a.i(46271);let z=a=>null==a?"":"string"==typeof a?a:"number"==typeof a?String(a):a?.name||a?.title||"",A=(...a)=>a.filter(Boolean).join(" "),B=({tone:a="neutral",children:c})=>(0,b.jsx)("span",{className:A("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[10px] font-black uppercase tracking-widest whitespace-nowrap","green"===a?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"red"===a?"bg-rose-500/10 text-rose-500 border-rose-500/20":"amber"===a?"bg-amber-500/10 text-amber-500 border-amber-500/20":"blue"===a?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-muted/50 text-muted-foreground border-border"),children:c}),C=({open:a,onClose:c,title:d,subtitle:e,children:f,width:g="max-w-xl"})=>(0,b.jsx)(x.AnimatePresence,{children:a&&(0,b.jsxs)(y.motion.div,{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/45",onClick:c,"aria-hidden":"true"}),(0,b.jsxs)(y.motion.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:16,scale:.98},transition:{duration:.18,ease:"easeOut"},className:A("relative w-full rounded-3xl border border-border bg-card/85 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-2xl overflow-hidden",g),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-5 sm:px-6 py-4 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base sm:text-lg font-black tracking-tight",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e})]}),(0,b.jsx)("button",{onClick:c,className:"inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-border bg-background/50 hover:bg-muted/60 transition","aria-label":"Close",children:(0,b.jsx)(s.X,{size:18})})]}),(0,b.jsx)("div",{className:"p-5 sm:p-6",children:f})]})]})});function D(){let a=(0,h.useQueryClient)(),[l,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("all"),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)({duration:"",price:""}),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)({_id:"",name:"",description:"Yangi kurs",duration:"1 yil",price:"0"}),U="https://admin-crm.onrender.com",V=e.default.get("token"),{data:W=[],isLoading:X}=(0,f.useQuery)({queryKey:["courses",l,E],queryFn:async()=>{let a={...l&&{search:l},..."all"!==E&&{is_freeze:"true"===E}},b=await d.default.get(`${U}/api/course/get-courses`,{headers:{Authorization:`Bearer ${V}`},params:a});return(Array.isArray(b.data?.data)?b.data.data:[]).map(a=>({...a,_id:z(a._id),name:z(a.name),description:z(a.description),duration:z(a.duration),price:Number(a.price)||0,students_count:Number(a.students_count)||0,is_freeze:!!a.is_freeze}))},enabled:!!V}),Y=(0,g.useMutation)({mutationFn:a=>d.default.post(`${U}/api/course/create-category`,{name:a},{headers:{Authorization:`Bearer ${V}`}}),onSuccess:a=>{let b=a.data?.data?._id||a.data?._id;T(a=>({...a,_id:b})),R(!0),setTimeout(()=>R(!1),2500),P(2)},onError:a=>{alert(a.response?.data?.message||"Bunday nomli kategoriya mavjud!")}}),Z=(0,g.useMutation)({mutationFn:a=>d.default.post(`${U}/api/course/edit-course`,a,{headers:{Authorization:`Bearer ${V}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),N(!1),H(!1),J(null)},onError:()=>alert("Xatolik yuz berdi!")}),$=(0,g.useMutation)({mutationFn:a=>{let b=a.is_freeze?"unfreeze-course":"freeze-course";return d.default.put(`${U}/api/course/${b}`,{course_id:a._id},{headers:{Authorization:`Bearer ${V}`}})},onSuccess:()=>a.invalidateQueries({queryKey:["courses"]})}),_=(0,g.useMutation)({mutationFn:a=>d.default.delete(`${U}/api/course/delete-course`,{headers:{Authorization:`Bearer ${V}`},data:{course_id:a}}),onSuccess:()=>a.invalidateQueries({queryKey:["courses"]}),onError:()=>alert("O'chirishda xatolik!")});return(0,b.jsxs)("div",{className:"relative min-h-screen w-full p-4 sm:p-6 lg:p-8 text-foreground overflow-hidden",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute -top-24 left-1/2 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-primary/10 blur-[120px]"}),(0,b.jsx)("div",{className:"pointer-events-none absolute -bottom-40 -right-24 h-[520px] w-[520px] rounded-full bg-blue-500/10 blur-[140px]"}),(0,b.jsx)("div",{className:"pointer-events-none absolute -bottom-40 -left-24 h-[520px] w-[520px] rounded-full bg-emerald-500/10 blur-[140px]"}),(0,b.jsx)(x.AnimatePresence,{children:Q&&(0,b.jsxs)(y.motion.div,{initial:{opacity:0,y:-14,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-14,scale:.98},transition:{duration:.18,ease:"easeOut"},className:"fixed top-5 left-1/2 -translate-x-1/2 z-[220] rounded-2xl border border-border bg-card/85 backdrop-blur px-5 py-3 shadow-xl flex items-center gap-3",children:[(0,b.jsx)(t.CheckCircle2,{className:"text-emerald-500",size:18}),(0,b.jsx)("span",{className:"text-sm font-bold",children:"Kategoriya muvaffaqiyatli qo'shildi"})]})}),(0,b.jsxs)("div",{className:"relative mx-auto max-w-6xl space-y-5",children:[(0,b.jsxs)("div",{className:"rounded-3xl border border-border bg-card/70 backdrop-blur supports-[backdrop-filter]:bg-card/50 p-5 sm:p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary",children:[(0,b.jsx)(v.Layers,{size:18}),(0,b.jsx)("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-muted-foreground",children:"Courses"})]}),(0,b.jsx)("h1",{className:"mt-2 text-2xl sm:text-3xl font-black tracking-tight",children:"Kurslar"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Qidirish, muzlatilganlarni filtrlash va kurslarni boshqarish."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full lg:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:w-[320px]",children:[(0,b.jsx)(q.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:16}),(0,b.jsx)("input",{type:"text",placeholder:"Kurs qidirish...",className:"w-full rounded-2xl border border-border bg-background/60 py-3 pl-11 pr-11 text-sm outline-none focus:ring-2 focus:ring-ring transition",value:l,onChange:a=>D(a.target.value)}),!!l&&(0,b.jsx)("button",{type:"button",onClick:()=>D(""),className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-xl border border-border bg-background/60 p-1.5 hover:bg-muted/60 transition","aria-label":"Clear",title:"Tozalash",children:(0,b.jsx)(s.X,{size:14})})]}),(0,b.jsxs)("div",{className:"relative w-full sm:w-[180px]",children:[(0,b.jsxs)("select",{value:E,onChange:a=>F(a.target.value),className:"w-full appearance-none rounded-2xl border border-border bg-background/60 py-3 pl-4 pr-10 text-sm outline-none focus:ring-2 focus:ring-ring transition cursor-pointer",children:[(0,b.jsx)("option",{value:"all",children:"Barchasi"}),(0,b.jsx)("option",{value:"false",children:"Faol"}),(0,b.jsx)("option",{value:"true",children:"Muzlatilgan"})]}),(0,b.jsx)(u.ChevronDown,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),(0,b.jsxs)("button",{onClick:()=>{T({_id:"",name:"",description:"Yangi kurs",duration:"1 yil",price:"0"}),P(1),N(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm",children:[(0,b.jsx)(i.Plus,{size:16}),"Kurs qo'shish"]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(o.Users,{size:14}),"Natija: ",(0,b.jsx)("b",{className:"text-foreground",children:W.length})]}),(0,b.jsx)("span",{className:"font-mono",children:X?"loading...":"ready"})]})]}),X?(0,b.jsx)("div",{className:"flex justify-center py-20",children:(0,b.jsx)(r.Loader2,{className:"animate-spin text-muted-foreground",size:36})}):0===W.length?(0,b.jsx)("div",{className:"rounded-3xl border border-border bg-card/70 p-10 text-center text-muted-foreground",children:"Kurs topilmadi."}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:W.map(a=>{let c=a.is_freeze?"blue":"green",d=$.isPending&&$.variables?._id===a._id,e=_.isPending&&_.variables===a._id;return(0,b.jsxs)("div",{className:A("relative rounded-3xl border border-border bg-card/70 backdrop-blur supports-[backdrop-filter]:bg-card/50 p-5 shadow-sm transition-all","hover:shadow-md hover:border-primary/25"),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Kurs"}),(0,b.jsx)("h3",{className:"mt-1 text-lg font-black tracking-tight truncate",children:a.name}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:a.description||"—"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,b.jsxs)(B,{tone:"amber",children:[(0,b.jsx)(w.BadgeDollarSign,{size:14}),Number(a.price).toLocaleString()," UZS"]}),(0,b.jsx)(B,{tone:c,children:a.is_freeze?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{size:14}),"Muzlatilgan"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{size:14}),"Faol"]})})]})]}),(0,b.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-border bg-background/50 p-4",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Davomiylik"}),(0,b.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 text-sm font-bold",children:[(0,b.jsx)(p.Clock,{size:16,className:"text-primary"}),(0,b.jsx)("span",{children:a.duration||"—"})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-border bg-background/50 p-4",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"O'quvchilar"}),(0,b.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 text-sm font-bold",children:[(0,b.jsx)(o.Users,{size:16,className:"text-primary"}),(0,b.jsx)("span",{children:a.students_count||0})]})]})]}),(0,b.jsxs)("div",{className:"mt-5 grid grid-cols-2 gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{J(a),L({duration:a.duration,price:String(a.price)}),H(!0)},className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-border bg-background/50 px-4 py-3 text-sm font-black hover:bg-muted/60 transition",children:[(0,b.jsx)(j.Pencil,{size:16}),"Edit"]}),(0,b.jsxs)("button",{onClick:()=>{confirm("O'chirmoqchimisiz?")&&_.mutate(a._id)},disabled:e,className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-rose-600 text-white px-4 py-3 text-sm font-black hover:opacity-90 transition disabled:opacity-60",children:[e?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):(0,b.jsx)(k.Trash2,{size:16}),"O'chirish"]}),(0,b.jsx)("button",{onClick:()=>$.mutate(a),disabled:d,className:A("col-span-2 inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-black transition disabled:opacity-60",a.is_freeze?"border border-border bg-background/50 hover:bg-muted/60":"bg-orange-600 text-white hover:bg-orange-700"),children:d?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):a.is_freeze?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{size:16}),"Eritish"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{size:16}),"Muzlatish"]})})]})]},a._id)})})]}),(0,b.jsx)(C,{open:M,onClose:()=>N(!1),title:1===O?"Yangi kurs qo'shish":"Kurs tafsilotlari",subtitle:1===O?"Avval kategoriya (kurs nomi) yaratiladi.":"Duration, price va description kiriting.",width:"max-w-xl",children:1===O?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Kurs nomi"}),(0,b.jsx)("input",{autoFocus:!0,value:S.name,onChange:a=>T({...S,name:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition",placeholder:"Frontend Dasturlash"}),(0,b.jsx)("p",{className:"text-[11px] text-muted-foreground",children:"Nom majburiy (unikal bo‘lishi kerak)."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>N(!1),className:"flex-1 rounded-2xl border border-border bg-background/50 px-4 py-3 text-sm font-black hover:bg-muted/60 transition",children:"Bekor qilish"}),(0,b.jsx)("button",{type:"button",onClick:()=>{S.name.trim()&&Y.mutate(S.name)},disabled:Y.isPending||!S.name.trim(),className:"flex-1 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm inline-flex items-center justify-center gap-2 disabled:opacity-60",children:Y.isPending?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Plus,{size:16}),"Yaratish"]})})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-border bg-background/50 p-4",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Kurs nomi"}),(0,b.jsx)("p",{className:"mt-1 text-sm font-black",children:S.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Description"}),(0,b.jsx)("textarea",{rows:3,value:S.description,onChange:a=>T({...S,description:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Duration"}),(0,b.jsx)("input",{value:S.duration,onChange:a=>T({...S,duration:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Price (UZS)"}),(0,b.jsx)("input",{type:"number",value:S.price,onChange:a=>T({...S,price:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>N(!1),className:"flex-1 rounded-2xl border border-border bg-background/50 px-4 py-3 text-sm font-black hover:bg-muted/60 transition",children:"Bekor qilish"}),(0,b.jsx)("button",{type:"button",onClick:()=>{Z.mutate({course_id:S._id,name:S.name,duration:S.duration,price:Number(S.price),description:S.description})},disabled:Z.isPending,className:"flex-1 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm inline-flex items-center justify-center gap-2 disabled:opacity-60",children:Z.isPending?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):"Saqlash"})]})]})}),(0,b.jsx)(C,{open:G,onClose:()=>{H(!1),J(null)},title:"Kursni tahrirlash",subtitle:I?`Kurs: ${I.name}`:void 0,width:"max-w-lg",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Davomiylik"}),(0,b.jsx)("input",{value:K.duration,onChange:a=>L({...K,duration:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Narx (UZS)"}),(0,b.jsx)("input",{type:"number",value:K.price,onChange:a=>L({...K,price:a.target.value}),className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{H(!1),J(null)},className:"flex-1 rounded-2xl border border-border bg-background/50 px-4 py-3 text-sm font-black hover:bg-muted/60 transition",children:"Bekor qilish"}),(0,b.jsx)("button",{type:"button",onClick:()=>{I?._id?Z.mutate({course_id:I._id,duration:K.duration,price:Number(K.price)}):alert("Kurs ma'lumotlari yuklanmadi!")},disabled:Z.isPending||!I,className:"flex-1 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm inline-flex items-center justify-center gap-2 disabled:opacity-60",children:Z.isPending?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):"Saqlash"})]})]})})]})}a.s(["default",()=>D],17274)}];

//# sourceMappingURL=app_%28main%29_courses_page_tsx_88114b10._.js.map