module.exports=[22816,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(5434),f=a.i(87532),g=a.i(15618),h=a.i(17755),i=a.i(33508),j=a.i(5784),k=a.i(96221),l=a.i(60246),m=a.i(69769),n=a.i(63519),o=a.i(73570),p=a.i(41675),q=a.i(81560),r=a.i(33217),s=a.i(70025),t=a.i(37927),u=a.i(46271),v=a.i(62036);let w=(...a)=>a.filter(Boolean).join(" "),x=({tone:a="neutral",children:c})=>(0,b.jsx)("span",{className:w("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[10px] font-black uppercase tracking-widest whitespace-nowrap","green"===a?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"red"===a?"bg-rose-500/10 text-rose-500 border-rose-500/20":"amber"===a?"bg-amber-500/10 text-amber-500 border-amber-500/20":"blue"===a?"bg-blue-500/10 text-blue-500 border-blue-500/20":"bg-muted/50 text-muted-foreground border-border"),children:c}),y=()=>(0,b.jsxs)("tr",{className:"border-t border-border/70",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-2xl bg-muted animate-pulse"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 w-28 rounded-lg bg-muted animate-pulse"}),(0,b.jsx)("div",{className:"h-3 w-40 rounded-lg bg-muted animate-pulse"})]})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 w-28 rounded-lg bg-muted animate-pulse"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 w-28 rounded-lg bg-muted animate-pulse"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-7 w-28 rounded-full bg-muted animate-pulse"})}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsx)("div",{className:"ml-auto h-9 w-12 rounded-2xl bg-muted animate-pulse"})})]});a.s(["default",0,()=>{let a=(0,t.useQueryClient)(),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)({first_name:"",last_name:"",phone:""}),J="https://admin-crm.onrender.com",K=e.default.get("token"),{data:L=[],isLoading:M}=(0,r.useQuery)({queryKey:["students",F],queryFn:async()=>{let a=F?`${J}/api/student/get-all-students?status=${F}`:`${J}/api/student/get-all-students`,b=await d.default.get(a,{headers:{Authorization:`Bearer ${K}`}});return Array.isArray(b.data)?b.data:b.data?.data||[]},enabled:!!K}),N=(0,s.useMutation)({mutationFn:async a=>d.default.post(`${J}/api/student/create-student`,a,{headers:{Authorization:`Bearer ${K}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),E(!1),I({first_name:"",last_name:"",phone:""})},onError:()=>alert("Qo'shishda xatolik")}),O=(0,s.useMutation)({mutationFn:async a=>d.default.delete(`${J}/api/student/delete-student`,{headers:{Authorization:`Bearer ${K}`},data:{_id:a}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),C(null)},onError:()=>alert("Xatolik")}),P=(0,s.useMutation)({mutationFn:async({action:a,payload:b})=>d.default.post(`${J}/api/student/${"return"===a?"return-student":"leave-student"}`,b,{headers:{Authorization:`Bearer ${K}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),C(null),alert("Muvaffaqiyatli bajarildi!")},onError:a=>{alert(a.response?.data?.message||"Amalda xatolik yuz berdi")}}),Q=(0,c.useMemo)(()=>{let a=z.trim().toLowerCase(),b=Array.isArray(L)?L:[];return a?b.filter(b=>`${b.first_name} ${b.last_name} ${b.phone}`.toLowerCase().includes(a)):b},[L,z]),R=({student:a,onClose:d})=>{let e=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{let b=e.current;!b||b.contains(a.target)||d()};return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[e,d]);let f="ta'tilda"===a.status||"yakunladi"===a.status,g=P.isPending&&(P.variables?.payload?._id===a._id||P.variables?.payload?.student_id===a._id);return(0,b.jsxs)(u.motion.div,{ref:e,initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.14,ease:"easeOut"},className:"absolute right-2 top-12 z-[120] w-56 overflow-hidden rounded-2xl border border-border bg-popover/85 text-popover-foreground shadow-xl backdrop-blur",children:[(0,b.jsxs)("button",{disabled:P.isPending,onClick:()=>(a=>{if("ta'tilda"===a.status||"yakunladi"===a.status)confirm("O'quvchini faol holatga qaytarishni tasdiqlaysizmi?")&&P.mutate({action:"return",payload:{_id:a._id}});else if("faol"===a.status){let b=prompt("Necha kunlik ta'til? (Masalan: 4)","4"),c=prompt("Sababi?","Tobi yo'q");if(!b||!c)return;P.mutate({action:"leave",payload:{student_id:a._id,leave_days:b,reason:c}})}})(a),className:w("w-full flex items-center justify-between gap-2 px-4 py-3 text-sm font-bold transition border-b border-border disabled:opacity-60",f?"text-emerald-500 hover:bg-emerald-500/10":"text-amber-500 hover:bg-amber-500/10"),children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(p.Calendar,{size:16}),f?"Faolga qaytarish":"Ta'tilga chiqarish"]}),g&&(0,b.jsx)(k.Loader2,{size:16,className:"animate-spin"})]}),(0,b.jsxs)("button",{disabled:O.isPending&&O.variables===a._id,onClick:()=>{var b;return b=a._id,void(confirm("Tasdiqlaysizmi?")&&O.mutate(b))},className:"w-full flex items-center justify-between gap-2 px-4 py-3 text-sm font-bold text-rose-500 hover:bg-rose-500/10 transition disabled:opacity-60",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(q.Trash2,{size:16}),"O'chirish"]}),O.isPending&&O.variables===a._id&&(0,b.jsx)(k.Loader2,{size:16,className:"animate-spin"})]})]})};return(0,b.jsxs)("div",{className:"relative min-h-screen w-full p-4 sm:p-6 lg:p-8 text-foreground overflow-hidden",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute -top-24 left-1/2 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-primary/10 blur-[120px]"}),(0,b.jsx)("div",{className:"pointer-events-none absolute -bottom-40 -right-24 h-[520px] w-[520px] rounded-full bg-blue-500/10 blur-[140px]"}),(0,b.jsx)("div",{className:"pointer-events-none absolute -bottom-40 -left-24 h-[520px] w-[520px] rounded-full bg-emerald-500/10 blur-[140px]"}),(0,b.jsxs)("div",{className:"relative mx-auto max-w-6xl space-y-5",children:[(0,b.jsxs)("div",{className:"rounded-3xl border border-border bg-card/70 backdrop-blur supports-[backdrop-filter]:bg-card/50 p-5 sm:p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary",children:[(0,b.jsx)(m.GraduationCap,{size:18}),(0,b.jsx)("span",{className:"text-[11px] font-black uppercase tracking-[0.25em] text-muted-foreground",children:"Students"})]}),(0,b.jsx)("h1",{className:"mt-2 text-2xl sm:text-3xl font-black tracking-tight",children:"Studentlar ro'yxati"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Qidirish, filtr, qo'shish va status amallari."})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center w-full lg:w-auto",children:[(0,b.jsxs)("div",{className:"relative w-full sm:w-[170px]",children:[(0,b.jsxs)("select",{className:"w-full appearance-none rounded-2xl border border-border bg-background/60 py-3 pl-4 pr-10 text-sm outline-none focus:ring-2 focus:ring-ring transition cursor-pointer",value:F,onChange:a=>G(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"Barchasi"}),(0,b.jsx)("option",{value:"faol",children:"Faol"}),(0,b.jsx)("option",{value:"ta'tilda",children:"Ta'tilda"}),(0,b.jsx)("option",{value:"yakunladi",children:"Yakunladi"})]}),(0,b.jsx)(j.ChevronDown,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",size:16})]}),(0,b.jsxs)("div",{className:"relative flex-1 sm:w-[320px]",children:[(0,b.jsx)(f.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:16}),(0,b.jsx)("input",{type:"text",placeholder:"Qidiruv: ism, tel...",className:"w-full rounded-2xl border border-border bg-background/60 py-3 pl-11 pr-11 text-sm outline-none focus:ring-2 focus:ring-ring transition",value:z,onChange:a=>A(a.target.value)}),!!z&&(0,b.jsx)("button",{type:"button",onClick:()=>A(""),className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-xl border border-border bg-background/60 p-1.5 hover:bg-muted/60 transition","aria-label":"Clear",title:"Tozalash",children:(0,b.jsx)(i.X,{size:14})})]}),(0,b.jsxs)("button",{onClick:()=>E(!0),className:"inline-flex items-center justify-center gap-2 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm",children:[(0,b.jsx)(g.Plus,{size:16}),"Student qo'shish"]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(l.Users,{size:14}),"Natija: ",(0,b.jsx)("b",{className:"text-foreground",children:Q.length})]}),(0,b.jsx)("span",{className:"font-mono",children:M?"loading...":"ready"})]})]}),(0,b.jsx)("div",{className:"rounded-3xl border border-border bg-card/70 backdrop-blur supports-[backdrop-filter]:bg-card/50 shadow-sm overflow-hidden",children:(0,b.jsx)("div",{className:"w-full overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[900px] text-left",children:[(0,b.jsx)("thead",{className:"sticky top-0 z-10 bg-card/80 backdrop-blur border-b border-border",children:(0,b.jsxs)("tr",{className:"text-[11px] uppercase text-muted-foreground font-black tracking-widest",children:[(0,b.jsx)("th",{className:"p-4",children:"Student"}),(0,b.jsx)("th",{className:"p-4",children:"Familiya"}),(0,b.jsx)("th",{className:"p-4",children:"Telefon"}),(0,b.jsx)("th",{className:"p-4",children:"Holat"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Amallar"})]})}),(0,b.jsx)("tbody",{className:"text-sm",children:M?Array.from({length:10}).map((a,c)=>(0,b.jsx)(y,{},c)):0===Q.length?(0,b.jsx)("tr",{className:"border-t border-border",children:(0,b.jsx)("td",{colSpan:5,className:"p-10 text-center",children:(0,b.jsxs)("div",{className:"mx-auto max-w-md space-y-2",children:[(0,b.jsx)("div",{className:"mx-auto w-fit rounded-2xl border border-border bg-background/60 p-3",children:(0,b.jsx)(o.AlertTriangle,{className:"text-muted-foreground"})}),(0,b.jsx)("p",{className:"font-black",children:"Hech narsa topilmadi"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Qidiruv yoki filtrni o‘zgartirib ko‘ring."})]})})}):Q.map(a=>{let c,d=`${a.first_name?.[0]||""}${a.last_name?.[0]||""}`.toUpperCase();return(0,b.jsxs)("tr",{className:"border-t border-border hover:bg-muted/40 transition-colors",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-2xl border border-border bg-background/60 flex items-center justify-center font-black",children:d||"S"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-bold truncate max-w-[220px]",children:a.first_name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-mono truncate max-w-[220px]",children:a._id})]})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("p",{className:"font-medium text-muted-foreground",children:a.last_name})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(n.Phone,{size:14}),(0,b.jsx)("span",{className:"font-mono text-xs",children:a.phone||"---"})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)(x,{tone:"faol"===(c=(a.status||"").toLowerCase())?"green":c.includes("ta'til")?"amber":c.includes("yakun")?"blue":"neutral",children:[(0,b.jsx)("span",{className:w("h-2 w-2 rounded-full","faol"===a.status?"bg-emerald-500":"ta'tilda"===a.status?"bg-amber-500":"yakunladi"===a.status?"bg-blue-500":"bg-zinc-400")}),a.status]})}),(0,b.jsxs)("td",{className:"p-4 text-right relative",children:[(0,b.jsx)("button",{onClick:()=>C(B===a._id?null:a._id),className:"inline-flex items-center justify-center rounded-2xl border border-border bg-background/50 px-3 py-2 hover:bg-muted/60 transition","aria-label":"Menu",children:(0,b.jsx)(h.MoreHorizontal,{size:18})}),(0,b.jsx)(v.AnimatePresence,{children:B===a._id&&(0,b.jsx)(R,{student:a,onClose:()=>C(null)})})]})]},a._id)})})]})})}),(0,b.jsx)(v.AnimatePresence,{children:D&&(0,b.jsxs)(u.motion.div,{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/45",onClick:()=>E(!1)}),(0,b.jsxs)(u.motion.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:16,scale:.98},transition:{duration:.18,ease:"easeOut"},className:"relative w-full max-w-lg rounded-3xl border border-border bg-card/80 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-5 sm:px-6 py-4 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-base sm:text-lg font-black tracking-tight",children:"Student qo'shish"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ism, familiya va telefon raqamini kiriting."})]}),(0,b.jsx)("button",{onClick:()=>E(!1),className:"inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-border bg-background/50 hover:bg-muted/60 transition","aria-label":"Close",children:(0,b.jsx)(i.X,{size:18})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),N.mutate(H)},className:"p-5 sm:p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Ism"}),(0,b.jsx)("input",{required:!0,placeholder:"Ali",className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition",value:H.first_name,onChange:a=>I({...H,first_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Familiya"}),(0,b.jsx)("input",{required:!0,placeholder:"Valiyev",className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition",value:H.last_name,onChange:a=>I({...H,last_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-[11px] font-black uppercase tracking-widest text-muted-foreground",children:"Telefon"}),(0,b.jsx)("input",{required:!0,placeholder:"+998 90 123 45 67",className:"w-full rounded-2xl border border-border bg-background/60 px-4 py-3 text-sm outline-none focus:ring-2 focus:ring-ring transition",value:H.phone,onChange:a=>I({...H,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>E(!1),className:"flex-1 rounded-2xl border border-border bg-background/50 px-4 py-3 text-sm font-bold hover:bg-muted/60 transition",children:"Bekor qilish"}),(0,b.jsxs)("button",{type:"submit",disabled:N.isPending,className:"flex-1 rounded-2xl bg-primary text-primary-foreground px-4 py-3 text-sm font-black hover:opacity-90 transition shadow-sm inline-flex items-center justify-center gap-2 disabled:opacity-60",children:[N.isPending&&(0,b.jsx)(k.Loader2,{size:16,className:"animate-spin"}),"Saqlash"]})]})]})]})]})})]})]})}])}];

//# sourceMappingURL=app_%28main%29_students_page_tsx_47c2ec3b._.js.map