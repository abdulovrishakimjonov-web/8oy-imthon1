module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],60246)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},17274,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(5434),f=a.i(33217),g=a.i(70025),h=a.i(37927),i=a.i(15618),j=a.i(70106);let k=(0,j.default)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),l=(0,j.default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);var m=a.i(60246),n=a.i(41710),o=a.i(87532),p=a.i(96221),q=a.i(33508);let r=(0,j.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),s=a=>null==a?"":"string"==typeof a?a:"number"==typeof a?String(a):a.name||a.title||"";function t(){let a=(0,h.useQueryClient)(),[j,t]=(0,c.useState)(""),[u,v]=(0,c.useState)("all"),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({duration:"",price:""}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)({_id:"",name:"",description:"Yangi kurs",duration:"1 yil",price:"0"}),K="https://admin-crm.onrender.com",L=e.default.get("token"),{data:M=[],isLoading:N}=(0,f.useQuery)({queryKey:["courses",j,u],queryFn:async()=>{let a={...j&&{search:j},..."all"!==u&&{is_freeze:"true"===u}},b=await d.default.get(`${K}/api/course/get-courses`,{headers:{Authorization:`Bearer ${L}`},params:a});return(Array.isArray(b.data?.data)?b.data.data:[]).map(a=>({...a,_id:s(a._id),name:s(a.name),description:s(a.description),duration:s(a.duration),price:Number(a.price)||0,students_count:Number(a.students_count)||0,is_freeze:!!a.is_freeze}))},enabled:!!L}),O=(0,g.useMutation)({mutationFn:a=>d.default.post(`${K}/api/course/create-category`,{name:a},{headers:{Authorization:`Bearer ${L}`}}),onSuccess:a=>{let b=a.data?.data?._id||a.data?._id;J(a=>({...a,_id:b})),H(!0),setTimeout(()=>H(!1),3e3),F(2)},onError:a=>{alert(a.response?.data?.message||"Bunday nomli kategoriya mavjud!")}}),P=(0,g.useMutation)({mutationFn:a=>d.default.post(`${K}/api/course/edit-course`,a,{headers:{Authorization:`Bearer ${L}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),D(!1),x(!1),z(null)},onError:()=>alert("Xatolik yuz berdi!")}),Q=(0,g.useMutation)({mutationFn:a=>{let b=a.is_freeze?"unfreeze-course":"freeze-course";return d.default.put(`${K}/api/course/${b}`,{course_id:a._id},{headers:{Authorization:`Bearer ${L}`}})},onSuccess:()=>a.invalidateQueries({queryKey:["courses"]})}),R=(0,g.useMutation)({mutationFn:a=>d.default.delete(`${K}/api/course/delete-course`,{headers:{Authorization:`Bearer ${L}`},data:{course_id:a}}),onSuccess:()=>a.invalidateQueries({queryKey:["courses"]}),onError:()=>alert("O'chirishda xatolik!")});return(0,b.jsxs)("div",{className:"w-full p-3 sm:p-6 min-h-screen bg-background text-foreground relative",children:[G&&(0,b.jsxs)("div",{className:"fixed top-5 left-1/2 -translate-x-1/2 z-[100] bg-card border border-border text-card-foreground px-6 py-3 rounded-xl shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-300",children:[(0,b.jsx)(r,{className:"text-green-500",size:20}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"Kategoriya muvaffaqiyatli qo'shildi"})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Kurslar"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Kurs qidirish...",className:"bg-transparent border border-input rounded-xl py-2 pl-10 pr-4 text-sm outline-none w-full focus:ring-1 focus:ring-ring",value:j,onChange:a=>t(a.target.value)})]}),(0,b.jsxs)("button",{onClick:()=>{J({_id:"",name:"",description:"Yangi kurs",duration:"1 yil",price:"0"}),F(1),D(!0)},className:"flex items-center gap-2 px-5 py-2 rounded-xl text-sm font-bold bg-primary text-primary-foreground hover:bg-primary/90 transition-all",children:[(0,b.jsx)(i.Plus,{size:18})," ",(0,b.jsx)("span",{children:"Kurs Qo'shish"})]})]})]}),N?(0,b.jsx)("div",{className:"flex justify-center py-20",children:(0,b.jsx)(p.Loader2,{className:"animate-spin text-muted-foreground",size:40})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:M.map(a=>(0,b.jsxs)("div",{className:"bg-card border border-border rounded-[2rem] p-6 hover:shadow-md transition-all relative",children:[(0,b.jsxs)("div",{className:"absolute top-6 right-6 border border-border bg-muted/50 px-3 py-1 rounded-xl text-xs font-semibold",children:[Number(a.price).toLocaleString()," UZS"]}),(0,b.jsx)("h3",{className:"text-xl font-bold mb-4 pr-16",children:a.name}),(0,b.jsxs)("div",{className:"space-y-3 mb-8 text-muted-foreground text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Clock,{size:14})," ",(0,b.jsx)("span",{children:a.duration})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Users,{size:14})," ",(0,b.jsxs)("span",{children:[a.students_count," students"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{z(a),B({duration:a.duration,price:String(a.price)}),x(!0)},className:"flex-1 border border-input bg-secondary text-secondary-foreground py-2 rounded-xl text-xs font-bold hover:bg-secondary/80 transition-all",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{confirm("O'chirmoqchimisiz?")&&R.mutate(a._id)},className:"flex-1 bg-destructive text-destructive-foreground py-2 rounded-xl text-xs font-bold transition-all hover:bg-destructive/90",children:R.isPending&&R.variables===a._id?(0,b.jsx)(p.Loader2,{className:"animate-spin mx-auto",size:14}):"O'chirish"})]}),(0,b.jsx)("button",{onClick:()=>Q.mutate(a),className:`w-full py-2 rounded-xl text-xs font-bold transition-all ${a.is_freeze?"border border-input hover:bg-accent":"bg-orange-600 text-white hover:bg-orange-700"}`,children:Q.isPending&&Q.variables?._id===a._id?(0,b.jsx)(p.Loader2,{className:"animate-spin mx-auto",size:14}):a.is_freeze?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)(l,{size:12})," Eritish"]}):(0,b.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[(0,b.jsx)(k,{size:12})," Muzlatish"]})})]})]},a._id))}),C&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border w-full max-w-[500px] rounded-[32px] p-8 shadow-2xl relative",children:[(0,b.jsx)("button",{onClick:()=>D(!1),className:"absolute top-6 right-6 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(q.X,{size:20})}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-6",children:1===E?"Yangi Kurs Qo'shish":"Kurs Yaratish"}),1===E?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-destructive uppercase",children:"Kurs nomi"}),(0,b.jsx)("input",{autoFocus:!0,type:"text",value:I.name,onChange:a=>J({...I,name:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-3 text-foreground outline-none focus:ring-1 focus:ring-destructive",placeholder:"Frontend Dasturlash"}),(0,b.jsx)("p",{className:"text-[10px] text-destructive italic",children:"Nom majburiy"})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:()=>{I.name.trim()&&O.mutate(I.name)},disabled:O.isPending||!I.name.trim(),className:"bg-primary text-primary-foreground px-6 py-2.5 rounded-xl font-bold text-sm hover:bg-primary/90 transition-all",children:O.isPending?(0,b.jsx)(p.Loader2,{className:"animate-spin",size:18}):"Yaratish"})})]}):(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:"Kurs nomi"}),(0,b.jsx)("input",{type:"text",value:I.name,readOnly:!0,className:"w-full bg-muted/50 border border-input rounded-xl px-4 py-2 text-muted-foreground cursor-not-allowed outline-none"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-foreground uppercase tracking-widest",children:"Course Details"}),(0,b.jsx)("label",{className:"block text-[11px] text-muted-foreground",children:"Description"}),(0,b.jsx)("textarea",{rows:3,value:I.description,onChange:a=>J({...I,description:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-2 text-foreground outline-none resize-none focus:ring-1 focus:ring-ring"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] text-muted-foreground",children:"Duration"}),(0,b.jsx)("input",{type:"text",value:I.duration,onChange:a=>J({...I,duration:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-2 text-foreground outline-none focus:ring-1 focus:ring-ring"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-[11px] text-muted-foreground",children:"Price (UZS)"}),(0,b.jsx)("input",{type:"number",value:I.price,onChange:a=>J({...I,price:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-2 text-foreground outline-none focus:ring-1 focus:ring-ring"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{onClick:()=>D(!1),className:"flex-1 bg-secondary text-secondary-foreground hover:bg-secondary/80 py-2.5 rounded-xl font-bold text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{P.mutate({course_id:I._id,name:I.name,duration:I.duration,price:Number(I.price),description:I.description})},disabled:P.isPending,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 py-2.5 rounded-xl font-bold text-sm flex justify-center items-center transition-all",children:P.isPending?(0,b.jsx)(p.Loader2,{className:"animate-spin",size:18}):"Save Changes"})]})]})]})}),w&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border w-full max-w-[400px] rounded-[32px] p-8 shadow-2xl relative",children:[(0,b.jsx)("button",{onClick:()=>{x(!1),z(null)},className:"absolute top-6 right-6 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(q.X,{size:20})}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Kursni Tahrirlash"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Davomiylik"}),(0,b.jsx)("input",{type:"text",value:A.duration,onChange:a=>B({...A,duration:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-3 text-foreground outline-none focus:ring-1 focus:ring-ring"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Narx (UZS)"}),(0,b.jsx)("input",{type:"number",value:A.price,onChange:a=>B({...A,price:a.target.value}),className:"w-full bg-muted border border-input rounded-xl px-4 py-3 text-foreground outline-none focus:ring-1 focus:ring-ring"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)("button",{onClick:()=>{x(!1),z(null)},className:"flex-1 bg-secondary text-secondary-foreground py-3 rounded-xl font-bold text-sm hover:bg-secondary/80",children:"Bekor qilish"}),(0,b.jsx)("button",{onClick:()=>{y?._id?P.mutate({course_id:y._id,duration:A.duration,price:Number(A.price)}):alert("Kurs ma'lumotlari yuklanmadi!")},disabled:P.isPending||!y,className:"flex-1 bg-primary text-primary-foreground py-3 rounded-xl font-bold text-sm flex justify-center items-center hover:bg-primary/90 transition-all",children:P.isPending?(0,b.jsx)(p.Loader2,{className:"animate-spin",size:20}):"Saqlash"})]})]})]})})]})}a.s(["default",()=>t],17274)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e7072035._.js.map