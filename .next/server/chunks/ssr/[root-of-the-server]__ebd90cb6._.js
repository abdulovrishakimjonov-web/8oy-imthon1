module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},17755,a=>{"use strict";let b=(0,a.i(70106).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],17755)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},22816,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(5434),f=a.i(87532),g=a.i(15618),h=a.i(17755),i=a.i(33508),j=a.i(5784),k=a.i(96221),l=a.i(33217),m=a.i(70025),n=a.i(37927);let o=()=>(0,b.jsxs)("tr",{className:"border-t border-zinc-200 dark:border-zinc-800 animate-pulse",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-3/4"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-full"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-12"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-16"})}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsx)("div",{className:"h-8 w-16 bg-zinc-200 dark:bg-zinc-800 rounded ml-auto"})})]});a.s(["default",0,()=>{let a=(0,n.useQueryClient)(),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({first_name:"",last_name:"",phone:""}),z="https://admin-crm.onrender.com",A=e.default.get("token"),{data:B=[],isLoading:C}=(0,l.useQuery)({queryKey:["students",v],queryFn:async()=>{let a=v?`${z}/api/student/get-all-students?status=${v}`:`${z}/api/student/get-all-students`,b=await d.default.get(a,{headers:{Authorization:`Bearer ${A}`}});return Array.isArray(b.data)?b.data:b.data?.data||[]},enabled:!!A}),D=(0,m.useMutation)({mutationFn:async a=>d.default.post(`${z}/api/student/create-student`,a,{headers:{Authorization:`Bearer ${A}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),u(!1),y({first_name:"",last_name:"",phone:""})},onError:()=>alert("Qo'shishda xatolik")}),E=(0,m.useMutation)({mutationFn:async a=>d.default.delete(`${z}/api/student/delete-student`,{headers:{Authorization:`Bearer ${A}`},data:{_id:a}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),s(null)},onError:()=>alert("Xatolik")}),F=(0,m.useMutation)({mutationFn:async({student:a,action:b,payload:c})=>d.default.post(`${z}/api/student/${"return"===b?"return-student":"leave-student"}`,c,{headers:{Authorization:`Bearer ${A}`}}),onSuccess:()=>{a.invalidateQueries({queryKey:["students"]}),s(null),alert("Muvaffaqiyatli bajarildi!")},onError:a=>{alert(a.response?.data?.message||"Amalda xatolik yuz berdi")}});return(0,b.jsxs)("div",{className:"w-full p-2 sm:p-6 min-h-screen",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[(0,b.jsx)("h1",{className:"text-lg font-bold",children:"Studentlar ro'yxati"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:flex-initial",children:[(0,b.jsxs)("select",{className:"w-full appearance-none border rounded-lg py-2 pl-4 pr-10 text-sm outline-none bg-white text-black cursor-pointer",value:v,onChange:a=>w(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"All"}),(0,b.jsx)("option",{value:"faol",children:"Faol"}),(0,b.jsx)("option",{value:"ta'tilda",children:"Ta'tilda"}),(0,b.jsx)("option",{value:"yakunladi",children:"Yakunladi"})]}),(0,b.jsx)(j.ChevronDown,{className:"absolute right-3 top-2.5 pointer-events-none text-black",size:16})]}),(0,b.jsx)("button",{onClick:()=>u(!0),className:"sm:hidden border p-2 rounded-lg flex items-center justify-center",children:(0,b.jsx)(g.Plus,{size:20})})]}),(0,b.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Qidiruv...",className:"w-full border rounded-lg py-2 pl-10 pr-4 text-sm outline-none",value:p,onChange:a=>q(a.target.value)})]}),(0,b.jsxs)("button",{onClick:()=>u(!0),className:"hidden sm:flex border px-4 py-2 rounded-lg text-sm font-bold items-center gap-2 whitespace-nowrap",children:[(0,b.jsx)(g.Plus,{size:18})," Student Qo'shish"]})]})]}),(0,b.jsx)("div",{className:"border rounded-2xl overflow-x-auto",children:(0,b.jsx)("div",{className:"min-w-[600px]",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{className:"text-xs uppercase border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-4",children:"Ism"}),(0,b.jsx)("th",{className:"p-4",children:"Familiya"}),(0,b.jsx)("th",{className:"p-4",children:"Telefon"}),(0,b.jsx)("th",{className:"p-4",children:"Holat"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"Amallar"})]})}),(0,b.jsx)("tbody",{className:"text-sm",children:C?[...Array(10)].map((a,c)=>(0,b.jsx)(o,{},c)):B.filter(a=>a.first_name.toLowerCase().includes(p.toLowerCase())).map(a=>(0,b.jsxs)("tr",{className:"border-b last:border-0 hover:bg-gray-50/50 transition-colors",children:[(0,b.jsx)("td",{className:"p-4",children:a.first_name}),(0,b.jsx)("td",{className:"p-4",children:a.last_name}),(0,b.jsx)("td",{className:"p-4",children:a.phone}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("span",{className:"border px-2 py-1 rounded text-[10px] uppercase font-bold whitespace-nowrap",children:a.status})}),(0,b.jsxs)("td",{className:"p-4 text-right relative",children:[(0,b.jsx)("button",{onClick:()=>s(r===a._id?null:a._id),className:"p-1 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(h.MoreHorizontal,{size:20})}),r===a._id&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[90]",onClick:()=>s(null)}),(0,b.jsxs)("div",{className:"absolute right-4 mt-2 w-48 border rounded-lg z-[100] text-black border-black shadow-lg bg-white",children:[(0,b.jsxs)("button",{disabled:F.isPending,onClick:()=>(a=>{if("ta'tilda"===a.status||"yakunladi"===a.status)confirm("O'quvchini faol holatga qaytarishni tasdiqlaysizmi?")&&F.mutate({action:"return",payload:{_id:a._id}});else if("faol"===a.status){let b=prompt("Necha kunlik ta'til? (Masalan: 4)","4"),c=prompt("Sababi?","Tobi yo'q");if(!b||!c)return;F.mutate({action:"leave",payload:{student_id:a._id,leave_days:b,reason:c}})}})(a),className:"w-full text-left px-4 py-2 text-xs border-b hover:bg-gray-50 flex items-center justify-between",children:["ta'tilda"===a.status?"Markazga qaytarish":"Ta'tilga chiqarish",F.isPending&&F.variables?.payload?._id===a._id&&(0,b.jsx)(k.Loader2,{size:12,className:"animate-spin"})]}),(0,b.jsxs)("button",{disabled:E.isPending,onClick:()=>{var b;return b=a._id,void(confirm("Tasdiqlaysizmi?")&&E.mutate(b))},className:"w-full text-left px-4 py-2 text-xs hover:bg-gray-50 flex items-center justify-between",children:["O'chirish",E.isPending&&E.variables===a._id&&(0,b.jsx)(k.Loader2,{size:12,className:"animate-spin"})]})]})]})]})]},a._id))})]})})}),t&&(0,b.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[200] bg-black/50 p-4",children:(0,b.jsxs)("div",{className:"bg-white text-black p-6 rounded-xl w-full max-w-[320px] border shadow-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"font-bold text-sm sm:text-base",children:"Student qo'shish"}),(0,b.jsx)("button",{onClick:()=>u(!1),children:(0,b.jsx)(i.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),D.mutate(x)},className:"flex flex-col gap-4",children:[(0,b.jsx)("input",{required:!0,placeholder:"Ism",className:"border border-black p-2 rounded text-sm outline-none",value:x.first_name,onChange:a=>y({...x,first_name:a.target.value})}),(0,b.jsx)("input",{required:!0,placeholder:"Familiya",className:"border p-2 rounded border-black text-sm outline-none",value:x.last_name,onChange:a=>y({...x,last_name:a.target.value})}),(0,b.jsx)("input",{required:!0,placeholder:"Telefon",className:"border p-2 rounded border-black text-sm outline-none",value:x.phone,onChange:a=>y({...x,phone:a.target.value})}),(0,b.jsxs)("button",{type:"submit",disabled:D.isPending,className:"border bg-black text-white py-2 rounded font-bold transition-opacity hover:opacity-90 text-sm flex items-center justify-center gap-2",children:[D.isPending&&(0,b.jsx)(k.Loader2,{size:16,className:"animate-spin"}),"Saqlash"]})]})]})})]})}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ebd90cb6._.js.map