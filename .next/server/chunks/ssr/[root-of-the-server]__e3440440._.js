module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},33508,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},5784,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},99464,a=>{"use strict";let b=(0,a.i(70106).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],99464)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},87654,a=>{"use strict";let b=(0,a.i(70106).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);a.s(["RotateCcw",()=>b],87654)},88721,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(5434),f=a.i(33217),g=a.i(70025),h=a.i(37927),i=a.i(99464),j=a.i(81560);let k=(0,a.i(70106).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var l=a.i(87532),m=a.i(33508),n=a.i(5784),o=a.i(87654);let p=()=>(0,b.jsxs)("tr",{className:"border-t border-zinc-200 dark:border-zinc-800 animate-pulse",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-3/4"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-full"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-12"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-16"})}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsx)("div",{className:"h-8 w-16 bg-zinc-200 dark:bg-zinc-800 rounded ml-auto"})})]});a.s(["default",0,()=>{let a=(0,h.useQueryClient)(),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)({first_name:"",last_name:"",email:"",password:"",role:"admin",status:"faol"}),A="https://admin-crm.onrender.com",B=e.default.get("token"),{data:C=[],isLoading:D}=(0,f.useQuery)({queryKey:["admins",s],queryFn:async()=>{if(!B)return[];let a=await d.default.get(`${A}/api/staff/all-admins?status=${s}`,{headers:{Authorization:`Bearer ${B}`}});return a.data?.data||[]},enabled:!!B}),E=(0,g.useMutation)({mutationFn:async a=>{let b="ishdan bo'shatilgan"===a.status;return d.default.post(`${A}/api/staff/edited-admin`,{_id:a._id,first_name:a.first_name,last_name:a.last_name,email:a.email,status:b?"faol":"ishdan bo'shatilgan"},{headers:{Authorization:`Bearer ${B}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["admins"]})},onError:()=>alert("Xatolik yuz berdi")}),F=(0,g.useMutation)({mutationFn:async a=>d.default.delete(`${A}/api/staff/deleted-admin`,{headers:{Authorization:`Bearer ${B}`},data:{_id:a}}),onSuccess:()=>{a.invalidateQueries({queryKey:["admins"]}),alert("Muvaffaqiyatli o'chirildi")},onError:a=>{alert(a.response?.status===403?"Huquqingiz yetarli emas!":"Xatolik yuz berdi")}}),G=(0,g.useMutation)({mutationFn:async a=>{let b=w?"/api/staff/edited-admin":"/api/staff/create-admin";return d.default.post(`${A}${b}`,a,{headers:{Authorization:`Bearer ${B}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["admins"]}),v(!1),alert("Muvaffaqiyatli saqlandi!")},onError:a=>{alert(a.response?.data?.message||"Xatolik yuz berdi")}}),H=(0,c.useMemo)(()=>C.filter(a=>`${a.first_name} ${a.last_name} ${a.email}`.toLowerCase().includes(q.toLowerCase())),[q,C]),I=(a=null)=>{a?(x(a),z({first_name:a.first_name,last_name:a.last_name,email:a.email,role:a.role,status:a.status||"faol",password:""})):(x(null),z({first_name:"",last_name:"",email:"",password:"",role:"admin",status:"faol"})),v(!0)};return(0,b.jsxs)("div",{className:"w-full p-2 sm:p-4 md:p-6 min-h-screen overflow-x-hidden",children:[(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[(0,b.jsx)("h1",{className:"text-lg md:text-xl font-semibold",children:"Adminlar boshqaruvi"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[140px]",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:14}),(0,b.jsx)("input",{type:"text",placeholder:"Qidiruv...",value:q,onChange:a=>r(a.target.value),className:"w-full bg-background border border-zinc-800 rounded-lg py-1.5 pl-8 pr-2 text-xs md:text-sm outline-none focus:ring-1 focus:ring-zinc-700"})]}),(0,b.jsxs)("button",{onClick:()=>I(null),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs md:text-sm bg-zinc-100 text-black hover:bg-zinc-300 transition-all whitespace-nowrap",children:[(0,b.jsx)(k,{size:14})," ",(0,b.jsx)("span",{className:"hidden xs:inline",children:"Qo'shish"}),(0,b.jsx)("span",{className:"xs:hidden",children:"+"})]}),(0,b.jsxs)("div",{className:"relative min-w-[80px]",children:[(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"w-full appearance-none bg-background border border-zinc-800 rounded-lg py-1.5 pl-2 pr-7 text-xs md:text-sm outline-none focus:ring-1 focus:ring-zinc-700 cursor-pointer text-zinc-400",children:[(0,b.jsx)("option",{value:"",children:"All"}),(0,b.jsx)("option",{value:"faol",children:"Faol"}),(0,b.jsx)("option",{value:"tatilda",children:"Tatilda"}),(0,b.jsx)("option",{value:"ishdan bo'shatilgan",children:"Nofaol"})]}),(0,b.jsx)(n.ChevronDown,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-zinc-500 pointer-events-none",size:12})]})]})]}),(0,b.jsx)("div",{className:"rounded-xl border border-zinc-800 overflow-hidden w-full overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left min-w-[600px] md:min-w-full",children:[(0,b.jsx)("thead",{className:"text-zinc-500 text-[10px] md:text-[12px] uppercase ",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-3",children:"Ism Familiya"}),(0,b.jsx)("th",{className:"p-3",children:"Email"}),(0,b.jsx)("th",{className:"p-3",children:"Rol"}),(0,b.jsx)("th",{className:"p-3",children:"Holat"}),(0,b.jsx)("th",{className:"p-3 text-right",children:"Amallar"})]})}),(0,b.jsx)("tbody",{className:"text-xs md:text-sm divide-y divide-zinc-800",children:D?[...Array(10)].map((a,c)=>(0,b.jsx)(p,{},`skeleton-${c}`)):H.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-zinc-800/30 transition-colors group",children:[(0,b.jsxs)("td",{className:"p-3 ",children:[a.first_name," ",a.last_name]}),(0,b.jsx)("td",{className:"p-3 font-mono text-[10px] md:text-xs",children:a.email}),(0,b.jsx)("td",{className:"p-3",children:(0,b.jsx)("span",{className:"px-2 py-0.5 rounded  border border-zinc-700 text-zinc-400 text-[9px] md:text-[10px] font-bold uppercase whitespace-nowrap",children:a.role})}),(0,b.jsx)("td",{className:"p-3",children:(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[9px] md:text-[10px] font-bold border whitespace-nowrap ${"faol"===a.status?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"tatilda"===a.status?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:a.status})}),(0,b.jsx)("td",{className:"p-3 text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-1 md:gap-2",children:[(0,b.jsx)("button",{onClick:()=>I(a),className:"p-1.5 hover:bg-zinc-700 rounded-md text-zinc-400 hover:text-white transition-all",title:"Tahrirlash",children:(0,b.jsx)(i.Pencil,{size:14})}),"ishdan bo'shatilgan"===a.status&&(0,b.jsx)("button",{onClick:()=>{confirm("ishdan bo'shatilgan"===a.status?"Ishga qaytarmoqchimisiz?":"Ishdan bo'shatmoqchimisiz?")&&E.mutate(a)},className:"p-1.5 rounded-md text-emerald-500 hover:bg-emerald-900/20 transition-all",title:"Ishga qaytarish",children:(0,b.jsx)(o.RotateCcw,{size:14})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a._id,void(confirm("Haqiqatan ham ushbu adminni bazadan butunlay o'chirmoqchimisiz?")&&F.mutate(b))},className:"p-1.5 hover:bg-red-900/40 rounded-md text-red-500 transition-all",title:"Butunlay o'chirish",children:(0,b.jsx)(j.Trash2,{size:14})})]})})]},a._id))})]})})]}),u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-2 md:p-4 animate-in fade-in duration-200",children:(0,b.jsxs)("div",{className:"bg-background border border-border w-full max-w-[500px] xs:max-w-md rounded-xl p-4 md:p-6 shadow-lg animate-in zoom-in-95 duration-200 overflow-y-auto max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,b.jsx)("h2",{className:"text-base md:text-lg font-semibold tracking-tight text-foreground",children:w?"Tahrirlash":"Yangi admin"}),(0,b.jsxs)("button",{onClick:()=>v(!1),className:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 p-1",children:[(0,b.jsx)(m.X,{size:18,className:"text-muted-foreground"}),(0,b.jsx)("span",{className:"sr-only",children:"Yopish"})]})]}),(0,b.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!B)return;let b=w?{_id:w._id,first_name:y.first_name,last_name:y.last_name,email:y.email,status:y.status}:{...y,role:y.role.toLowerCase(),work_date:new Date().toISOString().split("T")[0]};G.mutate(b)},className:"space-y-3 md:space-y-4 text-xs md:text-sm",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-3 md:gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-medium text-muted-foreground uppercase ml-1",children:"Ism"}),(0,b.jsx)("input",{placeholder:"Ism",value:y.first_name,onChange:a=>z({...y,first_name:a.target.value}),className:"w-full flex h-9 md:h-10 rounded-md border border-input bg-background px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-medium text-muted-foreground uppercase ml-1",children:"Familiya"}),(0,b.jsx)("input",{placeholder:"Familiya",value:y.last_name,onChange:a=>z({...y,last_name:a.target.value}),className:"w-full flex h-9 md:h-10 rounded-md border border-input bg-background px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-medium text-muted-foreground uppercase ml-1",children:"Email"}),(0,b.jsx)("input",{placeholder:"Email",type:"email",value:y.email,onChange:a=>z({...y,email:a.target.value}),className:"w-full flex h-9 md:h-10 rounded-md border border-input bg-background px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),!w&&(0,b.jsxs)("div",{className:"space-y-1.5 md:space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] md:text-xs font-medium text-muted-foreground uppercase ml-1",children:"Parol"}),(0,b.jsx)("input",{placeholder:"Parol",type:"password",value:y.password,onChange:a=>z({...y,password:a.target.value}),className:"w-full flex h-9 md:h-10 rounded-md border border-input bg-background px-3 py-1 md:py-2 text-xs md:text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",required:!0})]}),(0,b.jsxs)("div",{className:"flex flex-col xs:flex-row gap-2 md:gap-3 pt-2 md:pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>v(!1),className:"order-2 xs:order-1 flex-1 inline-flex items-center justify-center rounded-md text-xs md:text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 md:h-10 px-4 py-2",children:"Bekor qilish"}),(0,b.jsx)("button",{type:"submit",disabled:G.isPending,className:"order-1 xs:order-2 flex-1 inline-flex items-center justify-center rounded-md text-xs md:text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring bg-primary text-primary-foreground hover:bg-primary/90 h-9 md:h-10 px-4 py-2",children:G.isPending?"Saqlanmoqda...":"Saqlash"})]})]})]})})]})}],88721)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e3440440._.js.map